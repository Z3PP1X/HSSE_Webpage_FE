<!-- TEST SECTION: Dynamic Contact Rendering -->
<div class="ml-2 mt-8 p-4 border-2 border-blue-500 bg-blue-50">
  <h1 class="font-bold text-blue-600 text-lg mb-4">üß™ TEST: Dynamic Contact Section</h1>
  
  <!-- Debug Info -->
  <div class="mb-4 text-xs text-gray-600">
    <p>Total contacts: {{(config()?.addedContact || []).length}}</p>
    <p>Unique types: {{getUniqueContactTypes().length}}</p>
    <p>Has contacts: {{hasContacts()}}</p>
  </div>

  <!-- Dynamic Contact Rendering -->
  @if (hasContacts()) {
    @for (contactType of getUniqueContactTypes(); track contactType) {
      <div class="mb-6 p-3 border border-gray-300 rounded">
        <h2 class="font-bold text-black text-fs-subheading mb-2 bg-yellow-200 p-1">
          {{getContactTypeLabel(contactType)}} ({{contactType}})
        </h2>
        <div class="grid grid-cols-2 text-fs-text gap-1">
          @for (contact of getContactsByType(contactType); track contact.id) {
            <div class="bg-green-100 p-1"><p>{{contact.name}}</p></div>
            <div class="mr-2 text-right bg-blue-100 p-1"><p>{{contact.phoneNumber}}</p></div>
          }
        </div>
        <!-- Show count for this type -->
        <p class="text-xs text-gray-500 mt-1">
          Count: {{getContactsByType(contactType).length}}
        </p>
      </div>
    }
  } @else {
    <!-- Fallback when no contacts -->
    <div class="p-4 bg-red-100 border border-red-300 rounded">
      <p class="text-red-600 font-bold">‚ö†Ô∏è Keine Kontaktdaten verf√ºgbar</p>
      <p class="text-xs text-gray-600 mt-1">
        Raw data check: {{config()?.addedContact ? 'exists' : 'missing'}}
      </p>
    </div>
  }

  <!-- Raw Data Display for Debugging -->
  <details class="mt-4">
    <summary class="cursor-pointer text-sm font-bold">üîç Debug: Raw Contact Data</summary>
    <pre class="text-xs bg-gray-100 p-2 mt-2 overflow-auto max-h-32">{{config()?.addedContact | json}}</pre>
  </details>
</div>
<!-- END TEST SECTION -->


<div class="bg-white h-full grid grid-rows-12 grid-cols-3" >

  <div class="bg-customAlarmplanGray col-span-3 row-span-2 grid grid-rows-10 grid-cols-10">

    <div class="col-start-1 col-end-4 row-start-3 row-end-9 flex items-center">
      <img src="branding/SIXT_Logo_Neg.svg" alt="SIXT-Logo" class="w-full h-full object-contain">
    </div>


    <div class="col-start-4 col-end-10 row-start-3 flex items-start mb-3">
      <h1 class="text-white font-bold text-fs-heading">Notfall und Alarmplan</h1>
    </div>


    <div class="col-start-4 col-end-10 row-start-8 flex items-end">
      <h2 class="text-customAlarmplanSubheadline text-fs-subheading">
        Zugspitzstra√üe 1 M√ºnchen
      </h2>
      <p class=" text-customAlarmplanSubheadline text-right text-xs ml-10">{{this.timestamp}}</p>
    </div>
  </div>


  <div class="grid grid-cols-3 gap-6 mx-3 row-start-3 col-span-3 mt-3 mb-3">

    <div class="col-span-1 grid grid-cols-10 grid-rows-1">
      <div class="col-span-8 whitespace-nowrap"><h1 class="font-bold col-start-2 text-fs-category-heading">Verhalten bei Unf√§llen</h1></div>
      <div class="ml-2 h-10 w-10"><img [src]="titleFirstAid"></div>
    </div>

    <div class="col-span-1 grid grid-cols-10 grid-rows-1">
      <div class="col-span-8 whitespace-nowrap"><h1 class="font-bold col-start-2 ml-3  text-fs-category-heading">Verhalten im Brandfall</h1></div>
      <div class=" ml-2 h-10 w-10"><img [src]="titleFireAlarm"></div>
    </div>

    <div class="col-span-1 grid grid-cols-10 grid-rows-1">
      <div class="col-span-8 whitespace-nowrap"><h1 class="font-bold ml-3 text-fs-category-heading">Wichtige Rufnummern</h1></div>
      <div class="ml-2 bg-black h-10 w-10"><img [src]="titleImportantNumbers"></div>
    </div>
  </div>


  <div class="grid grid-cols-3 col-span-3 row-start-4 row-end-13 gap-6 mx-1 mb-2">
    <div class="bg-white col-span-1 border-2 border-customAlarmplanGreen h-full">
      <h1 class="text-black font-bold text-center text-fs-subheading mt-4">RUHE BEWAHREN!</h1>
      <div>
        <h1 class="text-black font-bold mt-4 ml-2 text-fs-subheading">1 Menschen retten - Ersthelfer informieren</h1>
        <div>
        </div>
        <div class="ml-8 text-gray-600 grid grid-cols-2 text-fs-text">

            @for (person of config().firstAiderDict; track person.id) {

              <p>{{person.name}}</p>
            <p class="text-right mr-2 ">{{person.phoneNumber}}</p>

            }

        </div>
        <ul class="ml-8 mt-4 text-fs-text">
          <li>‚Ä¢ Beseitigung der Unfallgefahr</li>
          <li>‚Ä¢ Verungl√ºckten aus dem Gefahrenbereich bringen, eigene Sicherheit beachten!</li>
          <li>‚Ä¢ Feststellen des Bewusstseins</li>
          <li>‚Ä¢ Atemwege freimachen / Erste Hilfe Ma√ünahmen</li>
          <li>‚Ä¢ Verbandk√§sten befinden sich in allen Filialen und TA-Pl√§tzen</li>
        </ul>
      </div>
      <div>
        <h1 class="font-bold text-black ml-2 mt-4 text-fs-subheading">2 Medizinischer Notruf</h1>
        <div class="ml-8 mr-4 text-fs-text">
          <p>Rettungsleitstelle <span class="font-bold text-orange-600">Telefon:112</span></p>
          <p><span class="font-bold text-sixt-orange">Wo</span>? <span class="font-bold text-sixt-orange">Was</span> ist passiert? <span class="font-bold text-sixt-orange">Wie viele</span> Verletzte? <span class="font-bold text-sixt-orange">Welche</span> Voraussetzungen? <span class="text-sixt-orange font-bold">Warten</span> auf R√ºckfragen!</p>
        </div>
      </div>
      <div>
        <h1 class="font-bold text-black ml-2 mt-4 text-fs-subheading"> 3 Unfall melden und dokumentieren</h1>
        <div class="grid grid-cols-2 ml-8 text-fs-text">
          <div class="grid grid-rows-3">
            <div class="flex flex-row mt-1">
              <div class="w-6 h-6"><img [src]="employeeIcon"></div>
              <p class="ml-2">Employee</p>
            </div>
            <div class="flex flex-row mt-1">
              <div class="w-6 h-6"><img [src]="healthIcon"></div>
              <p class="ml-2">Health</p>
            </div>
            <div class="flex flex-row mt-1">
              <div class="w-6 h-6"><img [src]="safetyIcon"></div>
              <p class="ml-2">Safety</p>
            </div>
          </div>
          <div class="w-16 h-16"><img [src]="safetyIcon"></div>
        </div>
      </div>

    </div>
    <div class="bg-white col-span-1 border-2 border-customAlarmplanRed h-full">
      <h1 class="text-black font-bold text-center text-fs-subheading mt-4">RUHE BEWAHREN!</h1>
      <div>
        <h1 class="font-bold text-black text-fs-subheading ml-2 mt-4">1 Menschen retten</h1>
        <div class="flex flex-row ml-2 mt-2">
          <h1 class="font-bold text-black text-fs-subheading">2</h1>
          <div class="w-8 h-8 ml-1 mr-1"><img [src]="fireAlarmIcon"></div>
          <h1 class="font-bold text-black text-fs-subheading">Feuermelder bet√§tigen</h1>
        </div>
        <div class="grid grid-cols-[1fr_8fr]">
          <div class="ml-2 flex flex-row mt-1">
            <h1 class="text-black font-bold text-fs-subheading">3</h1>
            <div class="w-8 h-8 ml-1"><img [src]="callFireDepartmentIcon"></div>
          </div>
          <div class="text-fs-subheading ml-1">
            <h1 class="font-bold text-black">Brand sofort melden:</h1>
            <h1 class="font-bold text-sixt-orange">Telefon: 112</h1>
          </div>

        </div>
        <div class="ml-2 mt-2">
          <h1 class="font-bold text-black text-fs-subheading">4 L√∂schversuch unternehmen</h1>
        <p class="text-fs-text"><span class="font-bold text-sixt-orange">Wo</span> brennt es? <span class="font-bold text-sixt-orange">Was</span> brennt? Sind <span class="font-bold text-sixt-orange">Menschen in Gefahr</span>? <span class="font-bold text-sixt-orange">Wer</span> meldet? <span class="font-bold text-sixt-orange">Warten</span> auf R√ºckfragen.</p>
        </div>
        <div class="ml-2 mt-2">
          <h1 class="font-bold text-black text-fs-subheading">5 Verhalten</h1>
          <div class="ml-8 text-fs-text">
            <ul class="">

              <li>‚Ä¢ Gefahrenbereich verlassen</li>
              <li>‚Ä¢ Verletzten und Hilfsved√ºrftigen helfen</li>
              <li class="flex flex-row">‚Ä¢ Gekennzeichnette Rettungswege benutzen <div class="w-8 h-8 ml-1"><img [src]="escapeRouteIcon"></div></li>
              <li>‚Ä¢ Keine Aufz√ºge benutzen</li>
              <li>‚Ä¢ Verqualmte R√§ume in Bodenn√§he verlassen</li>
              <li>‚Ä¢ T√ºren und Fenster schlie√üen</li>
              <li>‚Ä¢ Entstehungsbrand bek√§mpfen, sofern Eigenschutz gew√§hrleistet!</li>
              <li class="flex flex-row">‚Ä¢ N√§chster Feuerl√∂scher in max. 20m <div class="w-8 h-8 ml-1"><img [src]="fireExtinguisherIcon"></div></li>
              <li>‚Ä¢ Sammelplatz aufsuchen und auf Anweisungen warten:</li>

                <div class="grid grid-cols-[1fr_8fr] mt-1">
                  <div class="w-10 h-10"><img [src]="assemblyPointIcon" alt="SVG Bild">
                  </div>
                  <div class="ml-1">
                    <p>Ausgang durch</p>
                    <p class="text-red-600 font-bold">{{config().assemblyPoint}}</p>
                  </div>
                </div>
              <li>‚Ä¢ Feuerwehr einweisen</li>


            </ul>
          </div>

        </div>

      </div>
    </div>
    <div class="bg-white col-span-1 border-2 border-customAlarmplanBlack h-full">
      <h1 class="text-black font-bold text-center mt-4 text-fs-subheading">RUHE BEWAHREN!</h1>
      <div class="grid grid-cols-2 ml-2 mt-4">
        <div class="font-bold text-sixt-orange text-fs-subheading">
          <h1>Polizei-Notruf:</h1>
          <h1>Feuerwehr:</h1>
          <h1>Giftnotruf:</h1>
        </div>
        <div class="font-bold text-sixt-orange text-fs-subheading mr-2 text-right">
          <p>110</p>
          <p>112</p>
          <p>{{config().poisonEmergencyCall}}</p>
        </div>
      </div>
      <div class="mt-4 ml-2">
        <h1 class="font-bold text-black text-fs-subheading">N√§chstes Krankenhaus</h1>
        <div class="grid grid-cols-[1fr_8fr] text-fs-text">
          <div class="ml-2">
            <div><p>Name:</p></div>
            <div><p>Adresse:</p></div>
            <div><p>Adresse:</p></div>
          </div>
          <div class="mr-2 text-right">
            <div class="text-rigt mr-2"><p>{{config().nextHospital?.name}}</p></div>
            <div class="text-rigt mr-2"><p>{{config().nextHospital?.street}}</p></div>
            <div class="text-rigt mr-2"><p>{{config().nextHospital?.zipcode}}</p></div>
          </div>
        </div>
        <div class="ml-2 mt-4">
          <h1 class="font-bold text-black text-fs-subheading">Branch Manager</h1>
          <div class="grid grid-cols-2 text-fs-text">
            @for (element of config().addedContact; track element.id) {
              @if (element.contactClass === "BranchManager") {
                <div><p>{{element.name}}</p></div>
            <div class="mr-2 text-right"><p>{{element.phoneNumber}}</p></div>
              }
            }

          </div>
        </div>
        <div class="ml-2 mt-4">
          <h1 class="font-bold text-black text-fs-subheading">Gesch√§ftsleitung</h1>
          <div class="grid grid-cols-2 text-fs-text">
            @for (element of config().addedContact; track element.id) {
              @if (element.contactClass === "BranchManager") {
                <div><p>{{element.name}}</p></div>
            <div class="mr-2 text-right"><p>{{element.phoneNumber}}</p></div>
              }
            }
          </div>
        </div>
        <div class="ml-2 mt-4">
          <h1 class="font-bold text-black text-fs-subheading">Beauftragte f√ºr Umweltschutz</h1>
          <div class="grid grid-cols-2 text-fs-text">
            @for (element of config().addedContact; track element.id) {
              @if (element.contactClass === "Management") {
                <div><p>{{element.name}}</p></div>
            <div class="mr-2 text-right"><p>{{element.phoneNumber}}</p></div>
              }
            }
          </div>
        </div>
        <div class="ml-2 mt-4">
          <h1 class="font-bold text-black text-fs-subheading">Safety</h1>
          <div class="grid grid-cols-2 text-fs-text">
            @for (element of config().addedContact; track element.id) {
              @if (element.contactClass === "SafetyAdvisor") {
                <div><p>{{element.name}}</p></div>
            <div class="mr-2 text-right"><p>{{element.phoneNumber}}</p></div>
              }
            }
          </div>
        </div>

        <div class="ml-2 mt-4">
          <h1 class="font-bold text-black text-fs-subheading">QM DE Operation</h1>
          <div class="grid grid-cols-2 text-fs-text">
            @for (element of config().addedContact; track element.id) {
              @if (element.contactClass === "QualityManagement") {
                <div><p>{{element.name}}</p></div>
            <div class="mr-2 text-right"><p>{{element.phoneNumber}}</p></div>
              }
            }
          </div>
        </div>

        <div class="ml-2 mt-4">
          <h1 class="font-bold text-black text-fs-subheading">Betriebsarzt</h1>
          <div class="grid grid-cols-2 text-fs-text">
            @for (element of config().addedContact; track element.id) {
              @if (element.contactClass === "CompanyDoctor") {
                <div><p>{{element.name}}</p></div>
            <div class="mr-2 text-right"><p>{{element.phoneNumber}}</p></div>
              }
            }
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

